/*! report 2016-02-18 */
"use strict";function getLinkFunction(e,t,a,n){return function(i,r,o){function l(e){c=e.width||parseInt(o.width)||x||320,g=e.height||parseInt(o.height)||p||240,d.style.width=c+"px",d.style.height=g+"px"}function s(e,t,n){t=angular.extend({showXAxis:!0,showYAxis:!0,showLegend:!0},t);var i=angular.extend({orient:"top",axisLine:{show:!1}},angular.isObject(t.xAxis)?t.xAxis:{}),r=angular.extend({type:"value",orient:"right",scale:!1,axisLine:{show:!1},axisLabel:{formatter:function(e){return a.formatKMBT(e)}}},angular.isObject(t.yAxis)?t.yAxis:{}),o={title:a.getTitle(e,t,n),tooltip:a.getTooltip(e,t,n),legend:a.getLegend(e,t,n),toolbox:angular.extend({show:!1},angular.isObject(t.toolbox)?t.toolbox:{}),xAxis:[angular.extend(i,a.getAxisTicks(e,t,n))],yAxis:[r],series:a.getSeries(e,t,n)};return t.showXAxis||angular.forEach(o.xAxis,function(e){e.axisLine={show:!1},e.axisLabel={show:!1},e.axisTick={show:!1}}),t.showYAxis||angular.forEach(o.yAxis,function(e){e.axisLine={show:!1},e.axisLabel={show:!1},e.axisTick={show:!1}}),t.showLegend&&"gauge"!==n&&"map"!==n||delete o.legend,a.isAxisChart(n)||(delete o.xAxis,delete o.yAxis),t.dataZoom&&(o.dataZoom=angular.extend({show:!0,realtime:!0},t.dataZoom)),t.dataRange&&(o.dataRange=angular.extend({},t.dataRange)),t.polar&&(o.polar=t.polar),o}function u(){if(i.data&&i.config){var a;if(l(i.config),f||(f=echarts.init(d,t.get(i.config.theme||"macarons"))),i.config.event&&(Array.isArray(i.config.event)||(i.config.event=[i.config.event]),Array.isArray(i.config.event)&&i.config.event.forEach(function(e){y[e.type]||(y[e.type]=!0,f.on(e.type,function(t){e.fn(t)}))})),angular.isString(i.data)){if(m)return;m=!0,f.showLoading({text:i.config.loading||"奋力加载中...",textStyle:b}),e.get(i.data).success(function(e){m=!1,f.hideLoading(),e.data?(a=s(e.data,i.config,n),i.config.forceClear&&f.clear(),a.series.length?(f.setOption(a),f.resize()):f.showLoading({text:i.config.errorMsg||"没有数据",textStyle:b})):f.showLoading({text:i.config.emptyMsg||"数据加载失败",textStyle:b})}).error(function(){m=!1,f.showLoading({text:i.config.emptyMsg||"数据加载失败",textStyle:b})})}else a=s(i.data,i.config,n),i.config.forceClear&&f.clear(),a.series.length?(f.setOption(a),f.resize()):f.showLoading({text:i.config.errorMsg||"没有数据",textStyle:b})}}i.config=i.config||{};var c,g,f,d=r.find("div")[0],h=r.parent()[0],x=h.clientWidth,p=h.clientHeight,y={},m=!1,b={color:"red",fontSize:36,fontWeight:900,fontFamily:"Microsoft Yahei, Arial"};i.$watch(function(){return i.config},function(e){e&&u()},!0),i.$watch(function(){return i.data},function(e){e&&u()},!0)}}for(var app=angular.module("angular-echarts",["angular-echarts.theme","angular-echarts.util"]),types=["line","bar","area","pie","donut","gauge","map","radar"],i=0,n=types.length;n>i;i++)(function(e){app.directive(e+"Chart",["$http","theme","util",function(t,a,n){return{restrict:"EA",template:"<div></div>",scope:{config:"=config",data:"=data"},link:getLinkFunction(t,a,n,e)}}])})(types[i]);angular.module("angular-echarts.theme",[]).factory("theme",["infographic","macarons","shine","dark","blue","green","red",function(e,t,a,n,i,r,o,l){var s={infographic:e,macarons:t,shine:a,dark:n,blue:i,green:r,red:o,grey:l};return{get:function(e){return s[e]?s[e]:{}}}}]),angular.module("angular-echarts.util",[]).factory("util",function(){function e(e){return["pie","donut"].indexOf(e)>-1}function t(e){return["map"].indexOf(e)>-1}function a(e){return["line","bar","area"].indexOf(e)>-1}function n(e,t,a){var n=[];return e[0]&&angular.forEach(e[0].datapoints,function(e){n.push(e.x)}),{type:"category",boundaryGap:"bar"===a,data:n}}function i(n,i,r){var o=[];return angular.forEach(n,function(n){var l=[];angular.forEach(n.datapoints,function(e){l.push(e.y)});var s={type:r||"line",name:n.name,data:l};"area"===r&&(s.type="line",s.itemStyle={normal:{areaStyle:{type:"default"}}}),"gauge"===r&&(s=angular.extend(s,{splitNumber:10,axisLine:{lineStyle:{color:[[.2,"#228b22"],[.8,"#48b"],[1,"#ff4500"]],width:8}},axisTick:{splitNumber:10,length:12,lineStyle:{color:"auto"}},axisLabel:{textStyle:{color:"auto"}},splitLine:{show:!0,length:30,lineStyle:{color:"auto"}},pointer:{width:5},title:{show:!0,offsetCenter:[0,"-40%"],textStyle:{fontWeight:"bolder"}},detail:{formatter:"{value}%",textStyle:{color:"auto",fontWeight:"bolder"}}},i.gauge||{})),a(r)||(s.data=[],angular.forEach(n.datapoints,function(e){s.data.push({value:e.y,name:e.x})})),e(r)&&(s.type="pie",s.center=i.center||["40%","50%"],s.radius=i.radius||"60%","donut"===r?(s.radius=i.radius||["50%","70%"],s=angular.extend(s,{itemStyle:{normal:{label:{show:!1},labelLine:{show:!1}},emphasis:{label:{show:!0,position:"center",textStyle:{fontSize:"50",fontWeight:"bold"}}}}},i.donut||{})):"pie"===r&&(s=angular.extend(s,{itemStyle:{normal:{label:{position:"inner",formatter:function(e){return(+e.percent).toFixed()+"%"}},labelLine:{show:!1}},emphasis:{label:{show:!0,formatter:"{b}\n{d}%"}}}},i.pie||{}))),t(r)&&(s.type="map",s=angular.extend(s,{},i.map||{})),i.stack&&(s.stack="total"),"radar"===r&&(s.data=n.data),o.push(s)}),o}function r(t,a,n){var i={data:[]};return e(n)?(t[0]&&angular.forEach(t[0].datapoints,function(e){i.data.push(e.x)}),i.orient="verticle",i.x="right",i.y="center"):(angular.forEach(t,function(e){i.data.push(e.name)}),i.orient="horizontal"),angular.extend(i,a.legend||{})}function o(e,t,a){var n={};switch(a){case"line":case"area":n.trigger="axis";break;case"pie":case"donut":case"bar":case"map":case"gauge":n.trigger="item"}return"pie"===a&&(n.formatter="{a} <br/>{b}: {c} ({d}%)"),"map"===a&&(n.formatter="{b}"),angular.extend(n,angular.isObject(t.tooltip)?t.tooltip:{})}function l(t,a,n){return angular.isObject(a.title)?a.title:e(n)?null:{text:a.title,subtext:a.subtitle||"",x:50}}function s(e,t){return t||(t=function(e){return Math.round(100*e)/100}),e=Math.abs(e),e>=1e12?t(e/1e12)+"T":e>=1e9?t(e/1e9)+"B":e>=1e6?t(e/1e6)+"M":e>=1e3?t(e/1e3)+"K":1>e&&e>0?t(e):0===e?"":t(e)}return{isPieChart:e,isAxisChart:a,getAxisTicks:n,getSeries:i,getLegend:r,getTooltip:o,getTitle:l,formatKMBT:s}});